<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ARACEA â€“ LoterÃ­a Solidaria</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; font-family:Arial; background:#121212; color:#fff; }
header { background:#ff7a00; padding:10px; display:flex; align-items:center; gap:10px; }
header img { height:40px; border-radius:6px; }
.container { padding:15px; }
.card { background:#1e1e1e; padding:12px; border-radius:10px; margin-bottom:12px; }
input, select, button { width:100%; padding:10px; margin-top:6px; border-radius:6px; border:none; }
button { background:#ff7a00; color:#000; font-weight:bold; }
.small { font-size:14px; color:#ccc; }
hr { border:1px solid #333; }
</style>
</head>
<body>

<header>
<img src="20220603_103609.png">
<b>ARACEA â€“ LoterÃ­a Solidaria</b>
</header>

<div class="container">

<div class="card">
<b>âš™ï¸ ConfiguraciÃ³n</b>
<input type="number" id="beneficio" placeholder="Beneficio por dÃ©cimo (â‚¬)" value="3">
<button onclick="guardarConfig()">Guardar configuraciÃ³n</button>
</div>

<div class="card">
<b>ğŸ›ï¸ Casa de LoterÃ­a</b>
<input type="number" id="decimosCasa" placeholder="DÃ©cimos recogidos de la casa">
<input type="number" id="dineroCasa" placeholder="Dinero entregado a la casa (â‚¬)">
<button onclick="movimientoCasa()">Registrar movimiento casa</button>
<div class="small" id="estadoCasa"></div>
</div>

<div class="card">
<b>ğŸ§ Venta</b>
<input id="nombre" placeholder="Nombre comprador">
<input type="number" id="cantidad" placeholder="Cantidad de dÃ©cimos">
<input type="number" id="precio" placeholder="Precio por dÃ©cimo (â‚¬)">
<select id="pago">
<option>Efectivo</option>
<option>Bizum</option>
<option>Transferencia</option>
</select>
<input id="obs" placeholder="Observaciones">
<button onclick="guardarVenta()">Guardar venta</button>
</div>

<div class="card">
<b>ğŸ“œ Historial ventas</b>
<div id="historial"></div>
</div>

<div class="card">
<b>ğŸ’° Estado actual</b>
<div id="estado"></div>
</div>

</div>

<script>
let ventas = JSON.parse(localStorage.getItem("ventas")) || [];
let config = JSON.parse(localStorage.getItem("config")) || {beneficio:3};
let casa = JSON.parse(localStorage.getItem("casa")) || {decimos:0,dinero:0};

document.getElementById("beneficio").value = config.beneficio;

function guardarConfig(){
  config.beneficio = Number(document.getElementById("beneficio").value);
  localStorage.setItem("config",JSON.stringify(config));
  alert("ConfiguraciÃ³n guardada");
  actualizar();
}

function movimientoCasa(){
  casa.decimos += Number(document.getElementById("decimosCasa").value||0);
  casa.dinero += Number(document.getElementById("dineroCasa").value||0);
  localStorage.setItem("casa",JSON.stringify(casa));
  document.getElementById("estadoCasa").innerText="DÃ©cimos en casa: "+casa.decimos+" | Dinero entregado: "+casa.dinero+"â‚¬";
  actualizar();
}

function guardarVenta(){
  let v={
    nombre:nombre.value,
    cant:Number(cantidad.value),
    precio:Number(precio.value),
    pago:pago.value,
    obs:obs.value
  };
  ventas.push(v);
  localStorage.setItem("ventas",JSON.stringify(ventas));
  actualizar();
}

function actualizar(){
  let h="";
  let total=0, vendidos=0;
  ventas.forEach((v,i)=>{
    total+=v.cant*v.precio;
    vendidos+=v.cant;
    h+=`${v.nombre} â€“ ${v.cant} dÃ©cimos â€“ ${v.cant*v.precio}â‚¬ (${v.pago})<hr>`;
  });
  historial.innerHTML=h||"Sin ventas aÃºn";
  let beneficio = vendidos * config.beneficio;
  let dineroEnMano = total - casa.dinero;
  estado.innerHTML=`
  Total vendido: ${total}â‚¬<br>
  DÃ©cimos vendidos: ${vendidos}<br>
  Beneficio ARACEA: ${beneficio}â‚¬<br>
  Dinero en mano: ${dineroEnMano}â‚¬<br>
  DÃ©cimos disponibles: ${casa.decimos - vendidos}
  `;
}

actualizar();
</script>

</body>
</html>
