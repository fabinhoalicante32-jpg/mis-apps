<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ARACEA - LoterÃ­a Solidaria</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#121212;color:#fff}
header{background:#ff7a00;padding:10px;text-align:center;font-weight:bold}
.logo{max-height:60px;margin:10px auto;display:block}
.container{padding:15px}
button{width:100%;padding:12px;margin:6px 0;border:none;border-radius:8px;background:#ff7a00;color:#000;font-weight:bold}
.card{background:#1e1e1e;padding:12px;border-radius:10px;margin-bottom:12px}
input,select,textarea{width:100%;padding:10px;margin-top:6px;border-radius:6px;border:none}
.hidden{display:none}
hr{border:1px solid #333}
</style>
</head>
<body>

<header>ARACEA - LoterÃ­a Solidaria</header>

<div class="container">

<div id="home">
<img src="20220603_103609.png" class="logo">
<button onclick="openCamp('Navidad')">ğŸ« Navidad</button>
<button onclick="openCamp('El NiÃ±o')">ğŸ« El NiÃ±o</button>
<button onclick="openCamp('Mensual')">ğŸ“… Mensual</button>
<button onclick="openCamp('Semanal')">ğŸ“† Semanal</button>
</div>

<div id="campView" class="hidden">
<h3 id="campTitle"></h3>

<div class="card">
<b>âš™ï¸ ConfiguraciÃ³n</b>
<input type="number" id="beneficio" placeholder="Beneficio por dÃ©cimo (â‚¬)" value="3">
<button onclick="saveConfig()">Guardar</button>
</div>

<div class="card">
<b>ğŸ›ï¸ Casa de LoterÃ­a</b>
<input type="number" id="casaDecimos" placeholder="DÃ©cimos recogidos (+) o devueltos (-)">
<input type="number" id="casaDinero" placeholder="Dinero entregado a la casa (â‚¬)">
<button onclick="movCasa()">Registrar movimiento</button>
<div id="estadoCasa"></div>
</div>

<div class="card">
<b>ğŸ§ Venta</b>
<input id="nombre" placeholder="Nombre comprador">
<input type="number" id="cantidad" placeholder="Cantidad de dÃ©cimos">
<input type="number" id="precio" placeholder="Precio por dÃ©cimo (â‚¬)">
<select id="pago">
<option>Efectivo</option>
<option>Bizum</option>
<option>Transferencia</option>
</select>
<input id="obs" placeholder="Observaciones">
<button onclick="addVenta()">Guardar venta</button>
</div>

<div class="card">
<b>ğŸ“œ Historial ventas</b>
<div id="ventasList"></div>
</div>

<div class="card">
<b>ğŸ’° Estado actual</b>
<div id="estado"></div>
</div>

<button onclick="backHome()">â¬… Volver</button>
</div>

</div>

<script>
let data = JSON.parse(localStorage.getItem("aracea_multi")) || {};
let current = "";

function save(){localStorage.setItem("aracea_multi",JSON.stringify(data));}

function openCamp(name){
 current=name;
 if(!data[name]) data[name]={ventas:[],casa:{decimos:0,dinero:0},beneficio:3};
 home.classList.add("hidden");
 campView.classList.remove("hidden");
 campTitle.innerText=name;
 beneficio.value=data[name].beneficio;
 render();
}

function backHome(){
 campView.classList.add("hidden");
 home.classList.remove("hidden");
}

function saveConfig(){
 data[current].beneficio=Number(beneficio.value);
 save();
 render();
}

function movCasa(){
 data[current].casa.decimos+=Number(casaDecimos.value||0);
 data[current].casa.dinero+=Number(casaDinero.value||0);
 casaDecimos.value="";
 casaDinero.value="";
 save();
 render();
}

function addVenta(){
 let v={
  n:nombre.value,
  c:Number(cantidad.value),
  p:Number(precio.value),
  f:pago.value,
  o:obs.value
 };
 if(!v.n||!v.c||!v.p) return alert("Faltan datos");
 data[current].ventas.push(v);
 nombre.value="";cantidad.value="";precio.value="";obs.value="";
 save();
 render();
}

function render(){
 let camp=data[current];
 let total=0,vendidos=0;
 ventasList.innerHTML="";
 camp.ventas.forEach((v,i)=>{
  total+=v.c*v.p;
  vendidos+=v.c;
  ventasList.innerHTML+=`${v.n} - ${v.c} dÃ©cimos - ${v.c*v.p}â‚¬ (${v.f})<br>${v.o}<hr>`;
 });
 let benef=vendidos*camp.beneficio;
 let dineroEnMano=total-camp.casa.dinero;
 estado.innerHTML=`
 Total vendido: ${total}â‚¬<br>
 DÃ©cimos vendidos: ${vendidos}<br>
 Beneficio ARACEA: ${benef}â‚¬<br>
 Dinero en mano: ${dineroEnMano}â‚¬<br>
 DÃ©cimos disponibles: ${camp.casa.decimos-vendidos}
 `;
 estadoCasa.innerHTML=`DÃ©cimos en stock: ${camp.casa.decimos} | Dinero entregado: ${camp.casa.dinero}â‚¬`;
}

</script>
</body>
</html>
